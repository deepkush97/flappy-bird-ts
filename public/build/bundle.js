var app=function(){"use strict";function t(){}function e(t){return t()}function i(){return Object.create(null)}function r(t){t.forEach(e)}function n(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function o(t,e){t.appendChild(e)}function h(t,e,i){t.insertBefore(e,i||null)}function p(t){t.parentNode.removeChild(t)}function c(t){return document.createElement(t)}function a(t){return document.createTextNode(t)}function d(){return a(" ")}function f(t,e,i,r){return t.addEventListener(e,i,r),()=>t.removeEventListener(e,i,r)}function l(t,e,i){null==i?t.removeAttribute(e):t.getAttribute(e)!==i&&t.setAttribute(e,i)}function u(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function m(t,e,i,r){t.style.setProperty(e,i,r?"important":"")}let g;function $(t){g=t}const x=[],P=[],b=[],w=[],v=Promise.resolve();let y=!1;function _(t){b.push(t)}let S=!1;const k=new Set;function T(){if(!S){S=!0;do{for(let t=0;t<x.length;t+=1){const e=x[t];$(e),z(e.$$)}for($(null),x.length=0;P.length;)P.pop()();for(let t=0;t<b.length;t+=1){const e=b[t];k.has(e)||(k.add(e),e())}b.length=0}while(x.length);for(;w.length;)w.pop()();y=!1,S=!1,k.clear()}}function z(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(_)}}const O=new Set;function F(t,e){t&&t.i&&(O.delete(t),t.i(e))}function W(t,e,i,r){if(t&&t.o){if(O.has(t))return;O.add(t),undefined.c.push((()=>{O.delete(t),r&&(i&&t.d(1),r())})),t.o(e)}}function E(t){t&&t.c()}function j(t,i,s,o){const{fragment:h,on_mount:p,on_destroy:c,after_update:a}=t.$$;h&&h.m(i,s),o||_((()=>{const i=p.map(e).filter(n);c?c.push(...i):r(i),t.$$.on_mount=[]})),a.forEach(_)}function G(t,e){const i=t.$$;null!==i.fragment&&(r(i.on_destroy),i.fragment&&i.fragment.d(e),i.on_destroy=i.fragment=null,i.ctx=[])}function C(t,e){-1===t.$$.dirty[0]&&(x.push(t),y||(y=!0,v.then(T)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function N(e,n,s,o,h,c,a,d=[-1]){const f=g;$(e);const l=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:h,bound:i(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(f?f.$$.context:[])),callbacks:i(),dirty:d,skip_bound:!1,root:n.target||f.$$.root};a&&a(l.root);let u=!1;if(l.ctx=s?s(e,n.props||{},((t,i,...r)=>{const n=r.length?r[0]:i;return l.ctx&&h(l.ctx[t],l.ctx[t]=n)&&(!l.skip_bound&&l.bound[t]&&l.bound[t](n),u&&C(e,t)),i})):[],l.update(),u=!0,r(l.before_update),l.fragment=!!o&&o(l.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);l.fragment&&l.fragment.l(t),t.forEach(p)}else l.fragment&&l.fragment.c();n.intro&&F(e.$$.fragment),j(e,n.target,n.anchor,n.customElement),T()}$(f)}class X{$destroy(){G(this,1),this.$destroy=t}$on(t,e){const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(e),()=>{const t=i.indexOf(e);-1!==t&&i.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function A(e){let i;return{c(){i=c("section"),m(i,"height",e[0].size+"px"),m(i,"width",e[0].size+"px"),m(i,"left",e[0].left+"px"),m(i,"top",e[0].top+"px"),l(i,"id","bird"),l(i,"class","svelte-1vr9409")},m(t,e){h(t,i,e)},p(t,[e]){1&e&&m(i,"height",t[0].size+"px"),1&e&&m(i,"width",t[0].size+"px"),1&e&&m(i,"left",t[0].left+"px"),1&e&&m(i,"top",t[0].top+"px")},i:t,o:t,d(t){t&&p(i)}}}function H(t,e,i){let{bird:r}=e;return t.$$set=t=>{"bird"in t&&i(0,r=t.bird)},[r]}class V extends X{constructor(t){super(),N(this,t,H,A,s,{bird:0})}}class q{constructor(t=600,e=300,i=50,r=150,n=70,s=350,o=.7,h=1,p=20,c=40,a=20,d=1.5,f=10,l=.3){this.height=t,this.width=e,this.pipeWidth=i,this.pipeGap=r,this.minTopForTopPipe=n,this.maxTopForTopPipe=s,this.generateNewPipePercent=o,this.speed=h,this.groundHeight=p,this.birdX=c,this.birdSize=a,this.gravity=d,this.jumpVelocity=f,this.slowVelocityBy=l,this.velocity=0}newGame(){let t=this.createPipe(!0),e=this.createPipe(!1);return this.frame={score:0,height:this.height,width:this.width,gameOver:!1,gameStarted:!1,firstPipe:t,secondPipe:e,ground:{height:this.groundHeight},bird:{left:this.birdX,top:this.height/2-this.birdSize/2,size:this.birdSize}},this.frame}nextFrame(){return this.frame.gameOver||!this.frame.gameStarted?this.frame:(this.frame.firstPipe=this.movePipe(this.frame.firstPipe,this.frame.secondPipe),this.frame.secondPipe=this.movePipe(this.frame.secondPipe,this.frame.firstPipe),this.frame.bird.top>=this.height-this.groundHeight-this.birdSize?(this.frame.bird.top=this.height-this.groundHeight-this.birdSize,this.frame.gameOver=!0,this.frame):this.hasCollidedWithPipe()?(this.frame.gameOver=!0,this.frame):(this.velocity>0&&(this.velocity-=this.slowVelocityBy),this.frame.bird.top+=Math.pow(this.gravity,2)-this.velocity,this.frame.firstPipe.left+this.pipeWidth==this.birdX-this.speed&&(this.frame.score+=1),this.frame.secondPipe.left+this.pipeWidth==this.birdX-this.speed&&(this.frame.score+=1),this.frame))}hasCollidedWithPipe(){return this.frame.firstPipe.show&&this.checkPipe(this.frame.firstPipe.left)?!(this.frame.bird.top>this.frame.firstPipe.topPipe.height&&this.frame.bird.top+this.birdSize<this.frame.firstPipe.bottomPipe.top):!(!this.frame.secondPipe.show||!this.checkPipe(this.frame.secondPipe.left))&&!(this.frame.bird.top>this.frame.secondPipe.topPipe.height&&this.frame.bird.top+this.birdSize<this.frame.secondPipe.bottomPipe.top)}checkPipe(t){return t<=this.birdX+this.birdSize&&t+this.pipeWidth>=this.birdX}start(){return this.newGame(),this.frame.gameStarted=!0,this.frame}jump(){this.velocity<=0&&(this.velocity+=this.jumpVelocity)}randomYForTopPipe(){return this.minTopForTopPipe+(this.maxTopForTopPipe-this.minTopForTopPipe)*Math.random()}createPipe(t){const e=this.randomYForTopPipe();return{topPipe:{height:e,top:0},bottomPipe:{top:e+this.pipeGap,height:this.height},left:this.width-this.pipeWidth,width:this.pipeWidth,show:t}}movePipe(t,e){return t.show&&t.left<=-1*this.pipeWidth?(t.show=!1,t):(t.show&&(t.left-=this.speed),e.left<this.width*(1-this.generateNewPipePercent)&&e.show&&!t.show?this.createPipe(!0):t)}}function B(t){let e,i,r;return{c(){e=c("section"),i=d(),r=c("section"),m(e,"left",t[0].left+"px"),m(e,"top",t[0].topPipe.top+"px"),m(e,"width",t[0].width+"px"),m(e,"height",t[0].topPipe.height+"px"),l(e,"class","top-pipe pipe svelte-uaqcn8"),m(r,"left",t[0].left+"px"),m(r,"top",t[0].bottomPipe.top+"px"),m(r,"width",t[0].width+"px"),m(r,"height",t[0].bottomPipe.height+"px"),l(r,"class","bottom-pipe pipe svelte-uaqcn8")},m(t,n){h(t,e,n),h(t,i,n),h(t,r,n)},p(t,i){1&i&&m(e,"left",t[0].left+"px"),1&i&&m(e,"top",t[0].topPipe.top+"px"),1&i&&m(e,"width",t[0].width+"px"),1&i&&m(e,"height",t[0].topPipe.height+"px"),1&i&&m(r,"left",t[0].left+"px"),1&i&&m(r,"top",t[0].bottomPipe.top+"px"),1&i&&m(r,"width",t[0].width+"px"),1&i&&m(r,"height",t[0].bottomPipe.height+"px")},d(t){t&&p(e),t&&p(i),t&&p(r)}}}function M(e){let i,r=e[0].show&&B(e);return{c(){r&&r.c(),i=a("")},m(t,e){r&&r.m(t,e),h(t,i,e)},p(t,[e]){t[0].show?r?r.p(t,e):(r=B(t),r.c(),r.m(i.parentNode,i)):r&&(r.d(1),r=null)},i:t,o:t,d(t){r&&r.d(t),t&&p(i)}}}function L(t,e,i){let{pipe:r}=e;return t.$$set=t=>{"pipe"in t&&i(0,r=t.pipe)},[r]}class Y extends X{constructor(t){super(),N(this,t,L,M,s,{pipe:0})}}function I(t){let e,i,r,n,s,a=t[0].gameOver&&D(t);return{c(){e=c("section"),a&&a.c(),i=d(),r=c("button"),r.textContent="Start Game",l(r,"class","svelte-1xow2l5"),l(e,"id","init-screen"),l(e,"class","svelte-1xow2l5")},m(p,c){h(p,e,c),a&&a.m(e,null),o(e,i),o(e,r),n||(s=f(r,"click",t[2]),n=!0)},p(t,r){t[0].gameOver?a?a.p(t,r):(a=D(t),a.c(),a.m(e,i)):a&&(a.d(1),a=null)},d(t){t&&p(e),a&&a.d(),n=!1,s()}}}function D(t){let e,i,r,n,s,f=t[0].score+"";return{c(){e=c("h2"),e.textContent="Game Over",i=d(),r=c("h2"),n=a("Score: "),s=a(f),l(e,"class","svelte-1xow2l5"),l(r,"class","svelte-1xow2l5")},m(t,p){h(t,e,p),h(t,i,p),h(t,r,p),o(r,n),o(r,s)},p(t,e){1&e&&f!==(f=t[0].score+"")&&u(s,f)},d(t){t&&p(e),t&&p(i),t&&p(r)}}}function J(t){let e,i,r,n,s,g,$,x,P,b,w,v,y,_,S,k=t[0].score+"";s=new V({props:{bird:t[0].bird}}),$=new Y({props:{pipe:t[0].firstPipe}}),P=new Y({props:{pipe:t[0].secondPipe}});let T=(t[0].gameOver||!t[0].gameStarted)&&I(t);return{c(){e=c("main"),i=c("section"),r=a(k),n=d(),E(s.$$.fragment),g=d(),E($.$$.fragment),x=d(),E(P.$$.fragment),b=d(),T&&T.c(),w=d(),v=c("section"),l(i,"id","score"),l(i,"class","svelte-1xow2l5"),m(v,"height",t[0].ground.height+"px"),l(v,"id","ground"),l(v,"class","svelte-1xow2l5"),m(e,"width",t[0].width+"px"),m(e,"height",t[0].height+"px"),l(e,"class","game svelte-1xow2l5")},m(p,c){h(p,e,c),o(e,i),o(i,r),o(e,n),j(s,e,null),o(e,g),j($,e,null),o(e,x),j(P,e,null),o(e,b),T&&T.m(e,null),o(e,w),o(e,v),y=!0,_||(S=f(window,"click",t[1]),_=!0)},p(t,[i]){(!y||1&i)&&k!==(k=t[0].score+"")&&u(r,k);const n={};1&i&&(n.bird=t[0].bird),s.$set(n);const o={};1&i&&(o.pipe=t[0].firstPipe),$.$set(o);const h={};1&i&&(h.pipe=t[0].secondPipe),P.$set(h),t[0].gameOver||!t[0].gameStarted?T?T.p(t,i):(T=I(t),T.c(),T.m(e,w)):T&&(T.d(1),T=null),(!y||1&i)&&m(v,"height",t[0].ground.height+"px"),(!y||1&i)&&m(e,"width",t[0].width+"px"),(!y||1&i)&&m(e,"height",t[0].height+"px")},i(t){y||(F(s.$$.fragment,t),F($.$$.fragment,t),F(P.$$.fragment,t),y=!0)},o(t){W(s.$$.fragment,t),W($.$$.fragment,t),W(P.$$.fragment,t),y=!1},d(t){t&&p(e),G(s),G($),G(P),T&&T.d(),_=!1,S()}}}function K(t,e,i){const r=new q;let n=r.newGame();return setInterval((()=>{i(0,n=r.nextFrame())}),1e3/90),[n,function(){r.jump()},function(){i(0,n=r.start())}]}class Q extends X{constructor(t){super(),N(this,t,K,J,s,{})}}function R(e){let i,r,n;return r=new Q({}),{c(){i=c("div"),E(r.$$.fragment),l(i,"class","container svelte-4alkkh")},m(t,e){h(t,i,e),j(r,i,null),n=!0},p:t,i(t){n||(F(r.$$.fragment,t),n=!0)},o(t){W(r.$$.fragment,t),n=!1},d(t){t&&p(i),G(r)}}}return new class extends X{constructor(t){super(),N(this,t,null,R,s,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
